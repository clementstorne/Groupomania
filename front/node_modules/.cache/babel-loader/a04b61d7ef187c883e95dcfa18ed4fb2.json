{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport BlockAlert from \"@/components/BlockAlert.vue\";\nimport { AuthService } from \"@/services\";\nexport default {\n  name: \"FormSignup\",\n  components: {\n    BlockAlert\n  },\n\n  data() {\n    return {\n      user: {\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        password: \"\"\n      },\n      revealAlert: false,\n      messageAlert: \"\"\n    };\n  },\n\n  computed: {\n    firstnameIsValid() {\n      let regex = /^[^0-9.,\"?!;:#$%&()*+/<>=@[\\]\\\\^_{}|~]{2,}$/;\n      return regex.test(this.user.firstname);\n    },\n\n    lastnameIsValid() {\n      let regex = /^[^0-9.,\"?!;:#$%&()*+/<>=@[\\]\\\\^_{}|~]{2,}$/;\n      return regex.test(this.user.lastname);\n    },\n\n    emailIsValid() {\n      let regex = /^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$/;\n      return regex.test(this.user.email);\n    },\n\n    passwordIsValid() {\n      let regex = /((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\\W]).{8,})/g;\n      return regex.test(this.user.password);\n    },\n\n    formIsValid() {\n      return this.firstnameIsValid && this.lastnameIsValid && this.emailIsValid && this.passwordIsValid;\n    }\n\n  },\n  methods: {\n    async signup() {\n      try {\n        const credentials = {\n          firstname: this.user.firstname,\n          lastname: this.user.lastname,\n          email: this.user.email,\n          password: this.user.password\n        };\n        await AuthService.signup(credentials);\n        this.$router.push(\"/\");\n      } catch (err) {\n        console.log(err);\n        this.messageAlert = err.response.data.error.errorMessage;\n        this.revealAlert = !this.revealAlert;\n      }\n    },\n\n    toggleAlert() {\n      this.revealAlert = !this.revealAlert;\n    },\n\n    firstnameAlert() {\n      this.messageAlert = \"Le prénom ne peut contenir ni chiffres, ni caractères spéciaux et doit avoir une longueur minimale de 2 caractères\";\n      this.revealAlert = !this.revealAlert;\n    },\n\n    lastnameAlert() {\n      this.messageAlert = \"Le nom ne peut contenir ni chiffres, ni caractères spéciaux et doit avoir une longueur minimale de 2 caractères\";\n      this.revealAlert = !this.revealAlert;\n    },\n\n    emailAlert() {\n      this.messageAlert = \"Adresse email incorrecte\";\n      this.revealAlert = !this.revealAlert;\n    },\n\n    passwordAlert() {\n      this.messageAlert = \"Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caractère spécial. Il doit avoir une longueur minimale de 8 caractères\";\n      this.revealAlert = !this.revealAlert;\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA0GA,OAAOA,UAAP,MAAuB,6BAAvB;AAEA,SAASC,WAAT,QAA4B,YAA5B;AACA,eAAe;EACbC,IAAI,EAAE,YADO;EAEbC,UAAU,EAAE;IACVH;EADU,CAFC;;EAKbI,IAAI,GAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,SAAS,EAAE,EADP;QAEJC,QAAQ,EAAE,EAFN;QAGJC,KAAK,EAAE,EAHH;QAIJC,QAAQ,EAAE;MAJN,CADD;MAOLC,WAAW,EAAE,KAPR;MAQLC,YAAY,EAAE;IART,CAAP;EAUD,CAhBY;;EAiBbC,QAAQ,EAAE;IACRC,gBAAgB,GAAG;MACjB,IAAIC,KAAI,GAAI,6CAAZ;MACA,OAAOA,KAAK,CAACC,IAAN,CAAW,KAAKV,IAAL,CAAUC,SAArB,CAAP;IACD,CAJO;;IAKRU,eAAe,GAAG;MAChB,IAAIF,KAAI,GAAI,6CAAZ;MACA,OAAOA,KAAK,CAACC,IAAN,CAAW,KAAKV,IAAL,CAAUE,QAArB,CAAP;IACD,CARO;;IASRU,YAAY,GAAG;MACb,IAAIH,KAAI,GAAI,yCAAZ;MACA,OAAOA,KAAK,CAACC,IAAN,CAAW,KAAKV,IAAL,CAAUG,KAArB,CAAP;IACD,CAZO;;IAaRU,eAAe,GAAG;MAChB,IAAIJ,KAAI,GAAI,kDAAZ;MACA,OAAOA,KAAK,CAACC,IAAN,CAAW,KAAKV,IAAL,CAAUI,QAArB,CAAP;IACD,CAhBO;;IAiBRU,WAAW,GAAG;MACZ,OACE,KAAKN,gBAAL,IACA,KAAKG,eADL,IAEA,KAAKC,YAFL,IAGA,KAAKC,eAJP;IAMD;;EAxBO,CAjBG;EA2CbE,OAAO,EAAE;IACP,MAAMC,MAAN,GAAe;MACb,IAAI;QACF,MAAMC,WAAU,GAAI;UAClBhB,SAAS,EAAE,KAAKD,IAAL,CAAUC,SADH;UAElBC,QAAQ,EAAE,KAAKF,IAAL,CAAUE,QAFF;UAGlBC,KAAK,EAAE,KAAKH,IAAL,CAAUG,KAHC;UAIlBC,QAAQ,EAAE,KAAKJ,IAAL,CAAUI;QAJF,CAApB;QAMA,MAAMR,WAAW,CAACoB,MAAZ,CAAmBC,WAAnB,CAAN;QACA,KAAKC,OAAL,CAAaC,IAAb,CAAkB,GAAlB;MACF,CATA,CASE,OAAOC,GAAP,EAAY;QACZC,OAAO,CAACC,GAAR,CAAYF,GAAZ;QACA,KAAKd,YAAL,GAAoBc,GAAG,CAACG,QAAJ,CAAaxB,IAAb,CAAkByB,KAAlB,CAAwBC,YAA5C;QACA,KAAKpB,WAAL,GAAmB,CAAC,KAAKA,WAAzB;MACF;IACD,CAhBM;;IAiBPqB,WAAW,GAAG;MACZ,KAAKrB,WAAL,GAAmB,CAAC,KAAKA,WAAzB;IACD,CAnBM;;IAoBPsB,cAAc,GAAG;MACf,KAAKrB,YAAL,GACE,oHADF;MAEA,KAAKD,WAAL,GAAmB,CAAC,KAAKA,WAAzB;IACD,CAxBM;;IAyBPuB,aAAa,GAAG;MACd,KAAKtB,YAAL,GACE,iHADF;MAEA,KAAKD,WAAL,GAAmB,CAAC,KAAKA,WAAzB;IACD,CA7BM;;IA8BPwB,UAAU,GAAG;MACX,KAAKvB,YAAL,GAAoB,0BAApB;MACA,KAAKD,WAAL,GAAmB,CAAC,KAAKA,WAAzB;IACD,CAjCM;;IAkCPyB,aAAa,GAAG;MACd,KAAKxB,YAAL,GACE,8JADF;MAEA,KAAKD,WAAL,GAAmB,CAAC,KAAKA,WAAzB;IACD;;EAtCM;AA3CI,CAAf","names":["BlockAlert","AuthService","name","components","data","user","firstname","lastname","email","password","revealAlert","messageAlert","computed","firstnameIsValid","regex","test","lastnameIsValid","emailIsValid","passwordIsValid","formIsValid","methods","signup","credentials","$router","push","err","console","log","response","error","errorMessage","toggleAlert","firstnameAlert","lastnameAlert","emailAlert","passwordAlert"],"sourceRoot":"","sources":["/Users/clementstorne/Google Drive/OpenClassrooms/Dev-web/P7/groupomania-code/front/src/components/FormSignup.vue"],"sourcesContent":["<template>\n  <div\n    id=\"form\"\n    class=\"container py-2 px-0 col-10 py-md-3 px-md-5 col-md-8 form\"\n  >\n    <img\n      src=\"@/assets/logo.svg\"\n      alt=\"Logo Groupomania\"\n      class=\"mt-2 mb-2 mt-md-3 mb-mt-5\"\n    />\n    <form @submit.prevent=\"signup\" class=\"col-10\">\n      <div class=\"row form-row\">\n        <div class=\"mb-2 mb-md-3\">\n          <label for=\"firstname\" class=\"form-label\"\n            ><span\n              v-if=\"!firstnameIsValid\"\n              class=\"form-alert\"\n              @click=\"firstnameAlert\"\n            >\n              ⚠️ </span\n            ><span v-else> ✅ </span>Prénom\n          </label>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            id=\"firstname\"\n            autocomplete=\"given-name\"\n            v-model=\"user.firstname\"\n          />\n        </div>\n        <div class=\"mb-2 mb-md-3\">\n          <label for=\"lastname\" class=\"form-label\"\n            ><span\n              v-if=\"!lastnameIsValid\"\n              class=\"form-alert\"\n              @click=\"lastnameAlert\"\n            >\n              ⚠️ </span\n            ><span v-else> ✅ </span>Nom</label\n          >\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            id=\"lastname\"\n            autocomplete=\"family-name\"\n            v-model=\"user.lastname\"\n          />\n        </div>\n        <div class=\"mb-2 mb-md-3\">\n          <label for=\"email\" class=\"form-label\"\n            ><span v-if=\"!emailIsValid\" class=\"form-alert\" @click=\"emailAlert\">\n              ⚠️ </span\n            ><span v-else> ✅ </span>Email</label\n          >\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            id=\"email\"\n            autocomplete=\"email\"\n            v-model=\"user.email\"\n          />\n        </div>\n        <div class=\"mb-2 mb-md-3\">\n          <label for=\"password\" class=\"form-label\"\n            ><span\n              v-if=\"!passwordIsValid\"\n              class=\"form-alert\"\n              @click=\"passwordAlert\"\n            >\n              ⚠️ </span\n            ><span v-else> ✅ </span>Mot de passe</label\n          >\n          <input\n            type=\"password\"\n            class=\"form-control\"\n            id=\"password\"\n            autocomplete=\"new-password\"\n            v-model=\"user.password\"\n          />\n        </div>\n        <div class=\"my-2 my-md-3 d-grid\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-primary mt-3 p-1\"\n            :disabled=\"!formIsValid\"\n          >\n            S'inscrire\n          </button>\n        </div>\n      </div>\n    </form>\n    <div class=\"row mt-2 mt-md-3\">\n      <p class=\"text-light text-center\">\n        Déjà un compte ? <br />\n        <router-link to=\"/\" class=\"link\">Connectez-vous</router-link>\n      </p>\n    </div>\n    <BlockAlert\n      :reveal-alert=\"revealAlert\"\n      :toggle-alert=\"toggleAlert\"\n      :message-alert=\"messageAlert\"\n    />\n  </div>\n</template>\n\n<script>\nimport BlockAlert from \"@/components/BlockAlert.vue\";\n\nimport { AuthService } from \"@/services\";\nexport default {\n  name: \"FormSignup\",\n  components: {\n    BlockAlert,\n  },\n  data() {\n    return {\n      user: {\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        password: \"\",\n      },\n      revealAlert: false,\n      messageAlert: \"\",\n    };\n  },\n  computed: {\n    firstnameIsValid() {\n      let regex = /^[^0-9.,\"?!;:#$%&()*+/<>=@[\\]\\\\^_{}|~]{2,}$/;\n      return regex.test(this.user.firstname);\n    },\n    lastnameIsValid() {\n      let regex = /^[^0-9.,\"?!;:#$%&()*+/<>=@[\\]\\\\^_{}|~]{2,}$/;\n      return regex.test(this.user.lastname);\n    },\n    emailIsValid() {\n      let regex = /^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$/;\n      return regex.test(this.user.email);\n    },\n    passwordIsValid() {\n      let regex = /((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\\W]).{8,})/g;\n      return regex.test(this.user.password);\n    },\n    formIsValid() {\n      return (\n        this.firstnameIsValid &&\n        this.lastnameIsValid &&\n        this.emailIsValid &&\n        this.passwordIsValid\n      );\n    },\n  },\n  methods: {\n    async signup() {\n      try {\n        const credentials = {\n          firstname: this.user.firstname,\n          lastname: this.user.lastname,\n          email: this.user.email,\n          password: this.user.password,\n        };\n        await AuthService.signup(credentials);\n        this.$router.push(\"/\");\n      } catch (err) {\n        console.log(err);\n        this.messageAlert = err.response.data.error.errorMessage;\n        this.revealAlert = !this.revealAlert;\n      }\n    },\n    toggleAlert() {\n      this.revealAlert = !this.revealAlert;\n    },\n    firstnameAlert() {\n      this.messageAlert =\n        \"Le prénom ne peut contenir ni chiffres, ni caractères spéciaux et doit avoir une longueur minimale de 2 caractères\";\n      this.revealAlert = !this.revealAlert;\n    },\n    lastnameAlert() {\n      this.messageAlert =\n        \"Le nom ne peut contenir ni chiffres, ni caractères spéciaux et doit avoir une longueur minimale de 2 caractères\";\n      this.revealAlert = !this.revealAlert;\n    },\n    emailAlert() {\n      this.messageAlert = \"Adresse email incorrecte\";\n      this.revealAlert = !this.revealAlert;\n    },\n    passwordAlert() {\n      this.messageAlert =\n        \"Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caractère spécial. Il doit avoir une longueur minimale de 8 caractères\";\n      this.revealAlert = !this.revealAlert;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n#form {\n  background-color: rgba($color-primary, 0.55);\n  border-radius: 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  & img {\n    height: 40px;\n    width: auto;\n  }\n}\n.form {\n  &-label {\n    color: $white;\n    font-size: 16px;\n    font-weight: 400;\n    text-align: left;\n  }\n  &-control {\n    border: none;\n    padding: 12px;\n    &:focus {\n      box-shadow: 0px 0px 0px 4px rgba($white, 0.5);\n      outline: none;\n    }\n  }\n  &-alert {\n    cursor: pointer;\n  }\n}\n.btn-primary {\n  background: $color-tertiary;\n  font-weight: 700;\n  font-size: 24px;\n  border-radius: 8px;\n  border: none;\n  &:hover {\n    background: darken($color-tertiary, 5%);\n  }\n  &:focus {\n    background: darken($color-tertiary, 5%);\n    box-shadow: 0px 0px 0px 4px rgba($white, 0.5);\n    outline: none;\n  }\n  &:disabled {\n    background: $dark-gray;\n    box-shadow: 0px 0px 0px 4px rgba($color-tertiary, 0.5);\n    outline: none;\n  }\n}\n.link {\n  color: $color-tertiary;\n  font-weight: 600;\n  font-size: 20px;\n  &:hover {\n    color: darken($color-tertiary, 5%);\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}