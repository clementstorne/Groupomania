{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport BlockAlert from \"@/components/BlockAlert.vue\";\nimport { AuthService } from \"@/services\";\nexport default {\n  name: \"login-form\",\n  components: {\n    BlockAlert\n  },\n\n  data() {\n    return {\n      user: {\n        email: null,\n        password: null\n      },\n      revealAlert: false,\n      messageAlert: \"\"\n    };\n  },\n\n  computed: {\n    emailIsEmpty() {\n      return this.user.email;\n    },\n\n    passwordIsEmpty() {\n      return this.user.password;\n    },\n\n    formIsValid() {\n      return this.emailIsEmpty && this.passwordIsEmpty;\n    }\n\n  },\n  methods: {\n    async login() {\n      try {\n        const credentials = {\n          email: this.user.email,\n          password: this.user.password\n        };\n        let res = await AuthService.login(credentials);\n        await AuthService.saveToken(res.data.access_token);\n        console.log(localStorage.getItem(\"token\"));\n        this.$router.push(\"/home\");\n      } catch (err) {\n        console.log(err);\n        this.messageAlert = err.response.data.error.errorMessage;\n        this.revealAlert = !this.revealAlert;\n      }\n    },\n\n    toggleAlert() {\n      this.revealAlert = !this.revealAlert;\n    },\n\n    emailAlert() {\n      this.messageAlert = \"Veuillez saisir votre adresse mail\";\n      this.revealAlert = !this.revealAlert;\n    },\n\n    passwordAlert() {\n      this.messageAlert = \"Veuillez saisir votre mot de passe\";\n      this.revealAlert = !this.revealAlert;\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAsEA,OAAOA,UAAP,MAAuB,6BAAvB;AAEA,SAASC,WAAT,QAA4B,YAA5B;AAEA,eAAe;EACbC,IAAI,EAAE,YADO;EAEbC,UAAU,EAAE;IACVH;EADU,CAFC;;EAKbI,IAAI,GAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,KAAK,EAAE,IADH;QAEJC,QAAQ,EAAE;MAFN,CADD;MAKLC,WAAW,EAAE,KALR;MAMLC,YAAY,EAAE;IANT,CAAP;EAQD,CAdY;;EAebC,QAAQ,EAAE;IACRC,YAAY,GAAG;MACb,OAAO,KAAKN,IAAL,CAAUC,KAAjB;IACD,CAHO;;IAIRM,eAAe,GAAG;MAChB,OAAO,KAAKP,IAAL,CAAUE,QAAjB;IACD,CANO;;IAORM,WAAW,GAAG;MACZ,OAAO,KAAKF,YAAL,IAAqB,KAAKC,eAAjC;IACD;;EATO,CAfG;EA0BbE,OAAO,EAAE;IACP,MAAMC,KAAN,GAAc;MACZ,IAAI;QACF,MAAMC,WAAU,GAAI;UAClBV,KAAK,EAAE,KAAKD,IAAL,CAAUC,KADC;UAElBC,QAAQ,EAAE,KAAKF,IAAL,CAAUE;QAFF,CAApB;QAIA,IAAIU,GAAE,GAAI,MAAMhB,WAAW,CAACc,KAAZ,CAAkBC,WAAlB,CAAhB;QACA,MAAMf,WAAW,CAACiB,SAAZ,CAAsBD,GAAG,CAACb,IAAJ,CAASe,YAA/B,CAAN;QACAC,OAAO,CAACC,GAAR,CAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;QACA,KAAKC,OAAL,CAAaC,IAAb,CAAkB,OAAlB;MACF,CATA,CASE,OAAOC,GAAP,EAAY;QACZN,OAAO,CAACC,GAAR,CAAYK,GAAZ;QACA,KAAKjB,YAAL,GAAoBiB,GAAG,CAACC,QAAJ,CAAavB,IAAb,CAAkBwB,KAAlB,CAAwBC,YAA5C;QACA,KAAKrB,WAAL,GAAmB,CAAC,KAAKA,WAAzB;MACF;IACD,CAhBM;;IAiBPsB,WAAW,GAAG;MACZ,KAAKtB,WAAL,GAAmB,CAAC,KAAKA,WAAzB;IACD,CAnBM;;IAoBPuB,UAAU,GAAG;MACX,KAAKtB,YAAL,GAAoB,oCAApB;MACA,KAAKD,WAAL,GAAmB,CAAC,KAAKA,WAAzB;IACD,CAvBM;;IAwBPwB,aAAa,GAAG;MACd,KAAKvB,YAAL,GAAoB,oCAApB;MACA,KAAKD,WAAL,GAAmB,CAAC,KAAKA,WAAzB;IACD;;EA3BM;AA1BI,CAAf","names":["BlockAlert","AuthService","name","components","data","user","email","password","revealAlert","messageAlert","computed","emailIsEmpty","passwordIsEmpty","formIsValid","methods","login","credentials","res","saveToken","access_token","console","log","localStorage","getItem","$router","push","err","response","error","errorMessage","toggleAlert","emailAlert","passwordAlert"],"sourceRoot":"","sources":["/Users/clementstorne/Google Drive/OpenClassrooms/Dev-web/P7/groupomania-code/front/src/components/FormLogin.vue"],"sourcesContent":["<template>\n  <div\n    id=\"form\"\n    class=\"container py-2 px-0 col-10 py-md-3 px-md-5 col-md-8 form\"\n  >\n    <img\n      src=\"@/assets/logo.svg\"\n      alt=\"Logo Groupomania\"\n      class=\"mt-2 mb-5 mt-md-3 mb-md-5\"\n    />\n    <form @submit.prevent=\"login\" class=\"col-10\">\n      <div class=\"row\">\n        <div class=\"mb-3 col-12\">\n          <label for=\"email\" class=\"form-label\"\n            ><span v-if=\"!emailIsEmpty\" class=\"form-alert\" @click=\"emailAlert\">\n              ⚠️ </span\n            ><span v-else> ✅ </span>Email</label\n          >\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            id=\"email\"\n            autocomplete=\"email\"\n            v-model=\"user.email\"\n          />\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"password\" class=\"form-label\"\n            ><span\n              v-if=\"!passwordIsEmpty\"\n              class=\"form-alert\"\n              @click=\"passwordAlert\"\n            >\n              ⚠️ </span\n            ><span v-else> ✅ </span>Mot de passe</label\n          >\n          <input\n            type=\"password\"\n            class=\"form-control\"\n            id=\"password\"\n            autocomplete=\"current-password\"\n            v-model=\"user.password\"\n          />\n        </div>\n        <div class=\"my-3 d-grid\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-primary mt-3 p-1\"\n            :disabled=\"!formIsValid\"\n          >\n            Se connecter\n          </button>\n        </div>\n      </div>\n    </form>\n    <div class=\"row mt-3\">\n      <p class=\"text-light text-center\">\n        Pas encore de compte ? <br />\n        <router-link to=\"/signup\" class=\"link\">Inscrivez-vous</router-link>\n      </p>\n    </div>\n    <BlockAlert\n      :reveal-alert=\"revealAlert\"\n      :toggle-alert=\"toggleAlert\"\n      :message-alert=\"messageAlert\"\n    />\n  </div>\n</template>\n\n<script>\nimport BlockAlert from \"@/components/BlockAlert.vue\";\n\nimport { AuthService } from \"@/services\";\n\nexport default {\n  name: \"login-form\",\n  components: {\n    BlockAlert,\n  },\n  data() {\n    return {\n      user: {\n        email: null,\n        password: null,\n      },\n      revealAlert: false,\n      messageAlert: \"\",\n    };\n  },\n  computed: {\n    emailIsEmpty() {\n      return this.user.email;\n    },\n    passwordIsEmpty() {\n      return this.user.password;\n    },\n    formIsValid() {\n      return this.emailIsEmpty && this.passwordIsEmpty;\n    },\n  },\n  methods: {\n    async login() {\n      try {\n        const credentials = {\n          email: this.user.email,\n          password: this.user.password,\n        };\n        let res = await AuthService.login(credentials);\n        await AuthService.saveToken(res.data.access_token);\n        console.log(localStorage.getItem(\"token\"));\n        this.$router.push(\"/home\");\n      } catch (err) {\n        console.log(err);\n        this.messageAlert = err.response.data.error.errorMessage;\n        this.revealAlert = !this.revealAlert;\n      }\n    },\n    toggleAlert() {\n      this.revealAlert = !this.revealAlert;\n    },\n    emailAlert() {\n      this.messageAlert = \"Veuillez saisir votre adresse mail\";\n      this.revealAlert = !this.revealAlert;\n    },\n    passwordAlert() {\n      this.messageAlert = \"Veuillez saisir votre mot de passe\";\n      this.revealAlert = !this.revealAlert;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n#form {\n  background-color: rgba($color-primary, 0.55);\n  border-radius: 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  & img {\n    height: 40px;\n    width: auto;\n  }\n}\n.form {\n  &-label {\n    color: $white;\n    font-size: 16px;\n    font-weight: 400;\n    text-align: left;\n  }\n  &-control {\n    border: none;\n    padding: 12px;\n    &:focus {\n      box-shadow: 0px 0px 0px 4px rgba($color-primary, 0.5);\n      outline: none;\n    }\n  }\n  &-alert {\n    cursor: pointer;\n  }\n}\n.btn-primary {\n  background: $color-tertiary;\n  font-weight: 700;\n  font-size: 24px;\n  border-radius: 8px;\n  border: none;\n  &:hover {\n    background: darken($color-tertiary, 5%);\n  }\n  &:focus {\n    background: darken($color-tertiary, 5%);\n    box-shadow: 0px 0px 0px 4px rgba($white, 0.5);\n    outline: none;\n  }\n  &:disabled {\n    background: $dark-gray;\n    box-shadow: 0px 0px 0px 4px rgba($color-tertiary, 0.5);\n    outline: none;\n  }\n}\n.link {\n  color: $color-tertiary;\n  font-weight: 600;\n  font-size: 20px;\n  &:hover {\n    color: darken($color-tertiary, 5%);\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}