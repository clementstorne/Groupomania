{"ast":null,"code":"import { UsersService } from \"@/services/UsersService\";\nimport { PostsService } from \"@/services/PostsService\";\nimport profilePicture from \"@/assets/user-profile-picture.png\";\nexport default {\n  name: \"PostShare\",\n\n  data() {\n    return {\n      user: {\n        id: 0,\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        imageUrl: \"\"\n      },\n      post: {\n        content: \"\"\n      },\n      defautlImageUrl: profilePicture,\n      imageBase64url: \"\",\n      imageFile: null\n    };\n  },\n\n  methods: {\n    setBase64urlImage(e) {\n      this.imageFile = e.target.files[0];\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(this.imageFile);\n      fileReader.addEventListener(\"load\", () => {\n        this.imageBase64url = fileReader.result;\n      });\n    },\n\n    async createNewPost() {\n      try {\n        const formData = new FormData();\n\n        if (this.imageFile) {\n          formData.append(\"image\", this.imageFile);\n        }\n\n        formData.append(\"content\", this.post.content);\n        const result = await PostsService.createPost(formData);\n        this.$emit(\"newPostPublished\", result.data.data);\n        this.post.content = null;\n        this.imageFile = null;\n        this.imageBase64url = null;\n      } catch (err) {\n        console.log(err);\n      }\n    }\n\n  },\n\n  created() {\n    UsersService.getUserData().then(res => {\n      this.user = res.data.data;\n    }).catch(err => console.log(err));\n  }\n\n};","map":{"version":3,"mappings":"AA6DA,SAASA,YAAT,QAA6B,yBAA7B;AACA,SAASC,YAAT,QAA6B,yBAA7B;AACA,OAAOC,cAAP,MAA2B,mCAA3B;AAEA,eAAe;EACbC,IAAI,EAAE,WADO;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,EAAE,EAAE,CADA;QAEJC,SAAS,EAAE,EAFP;QAGJC,QAAQ,EAAE,EAHN;QAIJC,KAAK,EAAE,EAJH;QAKJC,QAAQ,EAAE;MALN,CADD;MAQLC,IAAI,EAAE;QACJC,OAAO,EAAE;MADL,CARD;MAWLC,eAAe,EAAEX,cAXZ;MAYLY,cAAc,EAAE,EAZX;MAaLC,SAAS,EAAE;IAbN,CAAP;EAeD,CAlBY;;EAmBbC,OAAO,EAAE;IACPC,iBAAiB,CAACC,CAAD,EAAI;MACnB,KAAKH,SAAL,GAAiBG,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAjB;MACA,MAAMC,UAAS,GAAI,IAAIC,UAAJ,EAAnB;MACAD,UAAU,CAACE,aAAX,CAAyB,KAAKR,SAA9B;MACAM,UAAU,CAACG,gBAAX,CAA4B,MAA5B,EAAoC,MAAM;QACxC,KAAKV,cAAL,GAAsBO,UAAU,CAACI,MAAjC;MACD,CAFD;IAGD,CARM;;IASP,MAAMC,aAAN,GAAsB;MACpB,IAAI;QACF,MAAMC,QAAO,GAAI,IAAIC,QAAJ,EAAjB;;QACA,IAAI,KAAKb,SAAT,EAAoB;UAClBY,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyB,KAAKd,SAA9B;QACF;;QACAY,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA2B,KAAKlB,IAAL,CAAUC,OAArC;QACA,MAAMa,MAAK,GAAI,MAAMxB,YAAY,CAAC6B,UAAb,CAAwBH,QAAxB,CAArB;QACA,KAAKI,KAAL,CAAW,kBAAX,EAA+BN,MAAM,CAACrB,IAAP,CAAYA,IAA3C;QACA,KAAKO,IAAL,CAAUC,OAAV,GAAoB,IAApB;QACA,KAAKG,SAAL,GAAiB,IAAjB;QACA,KAAKD,cAAL,GAAsB,IAAtB;MACF,CAXA,CAWE,OAAOkB,GAAP,EAAY;QACZC,OAAO,CAACC,GAAR,CAAYF,GAAZ;MACF;IACD;;EAxBM,CAnBI;;EA6CbG,OAAO,GAAG;IACRnC,YAAY,CAACoC,WAAb,GACGC,IADH,CACSC,GAAD,IAAS;MACb,KAAKjC,IAAL,GAAYiC,GAAG,CAAClC,IAAJ,CAASA,IAArB;IACD,CAHH,EAIGmC,KAJH,CAIUP,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAJlB;EAKD;;AAnDY,CAAf","names":["UsersService","PostsService","profilePicture","name","data","user","id","firstname","lastname","email","imageUrl","post","content","defautlImageUrl","imageBase64url","imageFile","methods","setBase64urlImage","e","target","files","fileReader","FileReader","readAsDataURL","addEventListener","result","createNewPost","formData","FormData","append","createPost","$emit","err","console","log","created","getUserData","then","res","catch"],"sourceRoot":"","sources":["/Users/clementstorne/Google Drive/OpenClassrooms/Dev-web/P7/groupomania-code/front/src/components/PostShare.vue"],"sourcesContent":["<template>\n  <div class=\"posting container my-4\">\n    <div class=\"col-12\">\n      <div\n        class=\"posting-top d-flex flex-column align-items-center flex-md-row justify-content-start align-items-md-start py-3\"\n      >\n        <div class=\"posting-top-profile-picture mb-2\">\n          <img\n            :src=\"user.imageUrl\"\n            alt=\"Photo de profil de l'utilisateur\"\n            v-if=\"user.imageUrl\"\n          />\n          <img\n            :src=\"defautlImageUrl\"\n            alt=\"Photo de profil de l'utilisateur\"\n            v-else\n          />\n        </div>\n        <div class=\"posting-top-right ms-2 me-2\">\n          <textarea\n            class=\"posting-top-message\"\n            :placeholder=\"`Quoi de neuf, ${user.firstname} ?`\"\n            style=\"height: 100px\"\n            id=\"post_content\"\n            v-model=\"post.content\"\n          ></textarea>\n          <img\n            :src=\"imageBase64url\"\n            alt=\"\"\n            v-if=\"imageBase64url\"\n            class=\"mt-3\"\n          />\n        </div>\n      </div>\n      <div\n        class=\"posting-bottom row d-flex flex-column align-items-between flex-md-row justify-content-start align-items-md-start py-2\"\n      >\n        <div class=\"posting-bottom-picture col-12 col-md-6 d-grid mb-2 p-0\">\n          <input\n            type=\"file\"\n            name=\"image\"\n            id=\"media\"\n            accept=\"image/png, image/jpg, image/jpeg image/gif\"\n            class=\"posting-bottom-picture-btn-input\"\n            @change=\"setBase64urlImage\"\n          />\n          <button class=\"btn btn-secondary mx-1\">\n            <label for=\"media\">ðŸ“· Partager une photo</label>\n          </button>\n        </div>\n        <div class=\"posting-bottom-btn col-12 col-md-6 d-grid mb-2 p-0\">\n          <button class=\"btn btn-primary mx-1\" @click.prevent=\"createNewPost\">\n            Publier\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { UsersService } from \"@/services/UsersService\";\nimport { PostsService } from \"@/services/PostsService\";\nimport profilePicture from \"@/assets/user-profile-picture.png\";\n\nexport default {\n  name: \"PostShare\",\n  data() {\n    return {\n      user: {\n        id: 0,\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        imageUrl: \"\",\n      },\n      post: {\n        content: \"\",\n      },\n      defautlImageUrl: profilePicture,\n      imageBase64url: \"\",\n      imageFile: null,\n    };\n  },\n  methods: {\n    setBase64urlImage(e) {\n      this.imageFile = e.target.files[0];\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(this.imageFile);\n      fileReader.addEventListener(\"load\", () => {\n        this.imageBase64url = fileReader.result;\n      });\n    },\n    async createNewPost() {\n      try {\n        const formData = new FormData();\n        if (this.imageFile) {\n          formData.append(\"image\", this.imageFile);\n        }\n        formData.append(\"content\", this.post.content);\n        const result = await PostsService.createPost(formData);\n        this.$emit(\"newPostPublished\", result.data.data);\n        this.post.content = null;\n        this.imageFile = null;\n        this.imageBase64url = null;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n  },\n  created() {\n    UsersService.getUserData()\n      .then((res) => {\n        this.user = res.data.data;\n      })\n      .catch((err) => console.log(err));\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.posting {\n  background: $white;\n  border-radius: 9px;\n  &-top {\n    &-profile-picture {\n      & img {\n        width: 40px;\n        height: 40px;\n        object-fit: cover;\n        border-radius: 50%;\n      }\n    }\n    &-right {\n      margin-left: 12px;\n      width: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      & img {\n        max-width: 100%;\n      }\n    }\n    &-message {\n      border-radius: 16px;\n      padding: 8px 16px;\n      background: $gray;\n      border: none;\n      resize: none;\n      width: 100%;\n      &:focus {\n        box-shadow: 0px 0px 0px 4px rgba($color-primary, 0.5);\n        outline: none;\n      }\n    }\n  }\n  &-bottom {\n    color: $dark-gray;\n    font-weight: 600;\n    align-items: center;\n    margin: 0;\n    &-picture {\n      position: relative;\n      overflow: hidden;\n      &:hover {\n        color: $color-primary;\n        font-weight: 900;\n        cursor: pointer;\n      }\n      &-btn-input {\n        position: absolute;\n        font-size: 50px;\n        opacity: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n        left: 0;\n      }\n      & p {\n        margin-bottom: 0;\n      }\n    }\n  }\n}\n.btn {\n  font-weight: 700;\n  font-size: 16px;\n  border-radius: 8px;\n  border: none;\n  &-primary {\n    background: $color-primary !important;\n    &:hover {\n      background: darken($color-primary, 5%);\n    }\n    &:focus {\n      box-shadow: 0px 0px 0px 4px rgba($color-primary, 0.5);\n      outline: none;\n    }\n  }\n  &-secondary {\n    background: $color-tertiary !important;\n    &:hover {\n      background: darken($color-tertiary, 5%);\n    }\n    &:focus {\n      box-shadow: 0px 0px 0px 4px rgba($color-tertiary, 0.5);\n      outline: none;\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}