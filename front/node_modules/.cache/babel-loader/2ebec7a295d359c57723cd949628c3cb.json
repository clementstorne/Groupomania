{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-fae5bece\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"home\"\n};\nconst _hoisted_2 = {\n  class: \"mx-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_PostShare = _resolveComponent(\"PostShare\");\n\n  const _component_PostShow = _resolveComponent(\"PostShow\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_PostShare, {\n    onNewPostPublished: $options.newPostWasPublished\n  }, null, 8\n  /* PROPS */\n  , [\"onNewPostPublished\"]), $data.isThisPostNew ? (_openBlock(), _createBlock(_component_PostShow, {\n    key: 0,\n    id: $data.newPost.id,\n    \"user-id\": $data.newPost.userId,\n    firstname: $data.newPost.firstname,\n    lastname: $data.newPost.lastname,\n    \"created-at\": $data.newPost.createdAt,\n    \"updated-at\": $data.newPost.updatedAt,\n    \"image-url\": $data.newPost.imageUrl,\n    content: $data.newPost.content,\n    \"media-url\": $data.newPost.mediaUrl,\n    likes: $data.newPost.likes,\n    \"users-who-liked\": $data.newPost.usersWhoLiked,\n    dislikes: $data.newPost.dislikes,\n    \"users-who-disliked\": $data.newPost.usersWhoDisliked\n  }, null, 8\n  /* PROPS */\n  , [\"id\", \"user-id\", \"firstname\", \"lastname\", \"created-at\", \"updated-at\", \"image-url\", \"content\", \"media-url\", \"likes\", \"users-who-liked\", \"dislikes\", \"users-who-disliked\"])) : _createCommentVNode(\"v-if\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.posts, post => {\n    return _openBlock(), _createBlock(_component_PostShow, {\n      key: post.id,\n      id: post.id,\n      \"user-id\": post.userId,\n      firstname: post.User.firstname,\n      lastname: post.User.lastname,\n      \"created-at\": post.createdAt,\n      \"updated-at\": post.updatedAt,\n      \"image-url\": post.User.imageUrl,\n      content: post.content,\n      \"media-url\": post.mediaUrl,\n      likes: post.Likes.length,\n      \"users-who-liked\": post.Likes,\n      dislikes: post.Dislikes.length,\n      \"users-who-disliked\": post.Dislikes\n    }, null, 8\n    /* PROPS */\n    , [\"id\", \"user-id\", \"firstname\", \"lastname\", \"created-at\", \"updated-at\", \"image-url\", \"content\", \"media-url\", \"likes\", \"users-who-liked\", \"dislikes\", \"users-who-disliked\"]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]);\n}","map":{"version":3,"mappings":";;;;;EACOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;;;;;uBADbC,oBAqCM,KArCN,cAqCM,CApCJC,oBAmCM,KAnCN,cAmCM,CAlCJC,aAAyDC,oBAAzD,EAAyD;IAAzCC,kBAAgB,EAAEC;EAAuB,CAAzD,EAAqD,IAArD,EAAqD;EAAA;EAArD,EAAqD,sBAArD,CAkCI,EAhCIC,qCADRC,aAeEC,mBAfF,EAeE;UAAA;IAbCC,EAAE,EAAEH,cAAQG,EAab;IAZC,WAASH,cAAQI,MAYlB;IAXCC,SAAS,EAAEL,cAAQK,SAWpB;IAVCC,QAAQ,EAAEN,cAAQM,QAUnB;IATC,cAAYN,cAAQO,SASrB;IARC,cAAYP,cAAQQ,SAQrB;IAPC,aAAWR,cAAQS,QAOpB;IANCC,OAAO,EAAEV,cAAQU,OAMlB;IALC,aAAWV,cAAQW,QAKpB;IAJCC,KAAK,EAAEZ,cAAQY,KAIhB;IAHC,mBAAiBZ,cAAQa,aAG1B;IAFCC,QAAQ,EAAEd,cAAQc,QAEnB;IADC,sBAAoBd,cAAQe;EAC7B,CAfF;;EAAA,iNAiCI,qBAjBJrB,oBAgBEsB,SAhBF,EAgBE,IAhBF,EAgBEC,YAfejB,WAef,EAfOkB,IAAa,IAAT;yBADbjB,aAgBEC,mBAhBF,EAgBE;MAdCiB,GAAG,EAAED,IAAI,CAACf,EAcX;MAbCA,EAAE,EAAEe,IAAI,CAACf,EAaV;MAZC,WAASe,IAAI,CAACd,MAYf;MAXCC,SAAS,EAAEa,IAAI,CAACE,IAAL,CAAUf,SAWtB;MAVCC,QAAQ,EAAEY,IAAI,CAACE,IAAL,CAAUd,QAUrB;MATC,cAAYY,IAAI,CAACX,SASlB;MARC,cAAYW,IAAI,CAACV,SAQlB;MAPC,aAAWU,IAAI,CAACE,IAAL,CAAUX,QAOtB;MANCC,OAAO,EAAEQ,IAAI,CAACR,OAMf;MALC,aAAWQ,IAAI,CAACP,QAKjB;MAJCC,KAAK,EAAEM,IAAI,CAACG,KAAL,CAAWC,MAInB;MAHC,mBAAiBJ,IAAI,CAACG,KAGvB;MAFCP,QAAQ,EAAEI,IAAI,CAACK,QAAL,CAAcD,MAEzB;MADC,sBAAoBJ,IAAI,CAACK;IAC1B,CAhBF;;IAAA;GAgBE,CAhBF;;EAAA,CAiBI,EAnCN,CAoCI,CArCN","names":["class","_createElementBlock","_createElementVNode","_createVNode","_component_PostShare","onNewPostPublished","$options","$data","_createBlock","_component_PostShow","id","userId","firstname","lastname","createdAt","updatedAt","imageUrl","content","mediaUrl","likes","usersWhoLiked","dislikes","usersWhoDisliked","_Fragment","_renderList","post","key","User","Likes","length","Dislikes"],"sourceRoot":"","sources":["/Users/clementstorne/Google Drive/OpenClassrooms/Dev-web/P7/groupomania-code/front/src/views/Home.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <div class=\"mx-2\">\n      <PostShare v-on:newPostPublished=\"newPostWasPublished\" />\n      <PostShow\n        v-if=\"isThisPostNew\"\n        :id=\"newPost.id\"\n        :user-id=\"newPost.userId\"\n        :firstname=\"newPost.firstname\"\n        :lastname=\"newPost.lastname\"\n        :created-at=\"newPost.createdAt\"\n        :updated-at=\"newPost.updatedAt\"\n        :image-url=\"newPost.imageUrl\"\n        :content=\"newPost.content\"\n        :media-url=\"newPost.mediaUrl\"\n        :likes=\"newPost.likes\"\n        :users-who-liked=\"newPost.usersWhoLiked\"\n        :dislikes=\"newPost.dislikes\"\n        :users-who-disliked=\"newPost.usersWhoDisliked\"\n      />\n      <PostShow\n        v-for=\"post in posts\"\n        :key=\"post.id\"\n        :id=\"post.id\"\n        :user-id=\"post.userId\"\n        :firstname=\"post.User.firstname\"\n        :lastname=\"post.User.lastname\"\n        :created-at=\"post.createdAt\"\n        :updated-at=\"post.updatedAt\"\n        :image-url=\"post.User.imageUrl\"\n        :content=\"post.content\"\n        :media-url=\"post.mediaUrl\"\n        :likes=\"post.Likes.length\"\n        :users-who-liked=\"post.Likes\"\n        :dislikes=\"post.Dislikes.length\"\n        :users-who-disliked=\"post.Dislikes\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport PostShow from \"@/components/PostShow.vue\";\nimport PostShare from \"../components/PostShare.vue\";\n\nimport { UsersService } from \"@/services/UsersService\";\nimport { PostsService } from \"@/services/PostsService\";\n\nexport default {\n  name: \"HomeView\",\n  components: {\n    PostShow,\n    PostShare,\n  },\n  data() {\n    return {\n      posts: [],\n      user: {\n        id: 0,\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        password: \"\",\n        imageUrl: \"\",\n      },\n      isThisPostNew: false,\n      newPost: {\n        id: null,\n        userId: null,\n        firstname: null,\n        lastname: null,\n        createdAt: null,\n        updatedAt: null,\n        imageUrl: null,\n        content: null,\n        mediaUrl: null,\n        likes: 0,\n        usersWhoLiked: [],\n        dislikes: 0,\n        usersWhoDisliked: [],\n      },\n    };\n  },\n  beforeMount() {\n    UsersService.getUserData()\n      .then((res) => {\n        this.user = res.data.data;\n      })\n      .catch((err) => console.log(err));\n  },\n  mounted() {\n    PostsService.getAllPosts()\n      .then((res) => {\n        this.posts = res.data.data;\n      })\n      .catch((err) => console.log(err));\n  },\n  methods: {\n    newPostWasPublished($event) {\n      this.isThisPostNew = true;\n      this.newPost.id = $event.id;\n      this.newPost.userId = $event.UserId;\n      this.newPost.firstname = this.user.firstname;\n      this.newPost.lastname = this.user.lastname;\n      this.newPost.createdAt = $event.createdAt;\n      this.newPost.updatedAt = $event.updatedAt;\n      this.newPost.imageUrl = this.user.imageUrl;\n      this.newPost.content = $event.content;\n      this.newPost.mediaUrl = $event.mediaUrl;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.home {\n  min-height: calc(100vh - 91.2px);\n  background: #f0f2f5;\n  margin-top: 72px;\n  padding: 10px 0;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}