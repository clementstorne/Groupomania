{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/logo.svg';\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d6e98af6\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  id: \"form\",\n  class: \"container py-2 px-0 col-10 py-md-3 px-md-5 col-md-8 form\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"Logo Groupomania\",\n  class: \"mt-2 mb-5 mt-md-3 mb-md-5\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"mb-3 col-12\"\n};\nconst _hoisted_5 = {\n  for: \"email\",\n  class: \"form-label\"\n};\nconst _hoisted_6 = {\n  key: 1\n};\nconst _hoisted_7 = {\n  class: \"mb-3\"\n};\nconst _hoisted_8 = {\n  for: \"password\",\n  class: \"form-label\"\n};\nconst _hoisted_9 = {\n  key: 1\n};\nconst _hoisted_10 = {\n  class: \"my-3 d-grid\"\n};\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = {\n  class: \"row mt-3\"\n};\nconst _hoisted_13 = {\n  class: \"text-light text-center\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_BlockAlert = _resolveComponent(\"BlockAlert\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.login && $options.login(...args), [\"prevent\"])),\n    class: \"col-10\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"label\", _hoisted_5, [!$options.emailIsEmpty ? (_openBlock(), _createElementBlock(\"span\", {\n    key: 0,\n    class: \"form-alert\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.emailAlert && $options.emailAlert(...args))\n  }, \" ⚠️ \")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \" ✅ \")), _createTextVNode(\"Email\")]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"email\",\n    autocomplete: \"email\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.user.email = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.user.email]])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"label\", _hoisted_8, [!$options.passwordIsEmpty ? (_openBlock(), _createElementBlock(\"span\", {\n    key: 0,\n    class: \"form-alert\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.passwordAlert && $options.passwordAlert(...args))\n  }, \" ⚠️ \")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_9, \" ✅ \")), _createTextVNode(\"Mot de passe\")]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control\",\n    id: \"password\",\n    autocomplete: \"current-password\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.user.password = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.user.password]])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary mt-3 p-1\",\n    disabled: !$options.formIsValid\n  }, \" Se connecter \", 8\n  /* PROPS */\n  , _hoisted_11)])])], 32\n  /* HYDRATE_EVENTS */\n  ), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"p\", _hoisted_13, [_createTextVNode(\" Pas encore de compte ? \"), _hoisted_14, _createVNode(_component_router_link, {\n    to: \"/signup\",\n    class: \"link\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Inscrivez-vous\")]),\n    _: 1\n    /* STABLE */\n\n  })])]), _createVNode(_component_BlockAlert, {\n    \"reveal-alert\": $data.revealAlert,\n    \"toggle-alert\": $options.toggleAlert,\n    \"message-alert\": $data.messageAlert\n  }, null, 8\n  /* PROPS */\n  , [\"reveal-alert\", \"toggle-alert\", \"message-alert\"])]);\n}","map":{"version":3,"mappings":";OAMMA,gBAAuB;;;;;EAJzBC,EAAE,EAAC;EACHC,KAAK,EAAC;;;gEAENC,oBAIE,KAJF,EAIE;EAHAC,GAAuB,EAAvBJ,UAGA;EAFAK,GAAG,EAAC,kBAEJ;EADAH,KAAK,EAAC;AACN,CAJF;;AAAA;;;EAMOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EACFI,GAAG,EAAC;EAAQJ,KAAK,EAAC;;;;;;EAatBA,KAAK,EAAC;;;EACFI,GAAG,EAAC;EAAWJ,KAAK,EAAC;;;;;;EAiBzBA,KAAK,EAAC;;;;EAWVA,KAAK,EAAC;;;EACNA,KAAK,EAAC;;;iEACgBC,oBAAM,IAAN,EAAM,IAAN,EAAM,IAAN,EAAM;AAAA;AAAN;;;;;;;uBAxD7BI,oBAiEM,KAjEN,cAiEM,CA7DJC,UA6DI,EAxDJL,oBA4CO,MA5CP,EA4CO;IA5CAM,QAAM,wDAAUC,yCAAV,EAAe,WAAf,EA4CN;IA5CuBR,KAAK,EAAC;EA4C7B,CA5CP,GACEC,oBA0CM,KA1CN,cA0CM,CAzCJA,oBAaM,KAbN,cAaM,CAZJA,oBAIC,OAJD,cAIC,EAHeO,uCAAbH,oBAEA,MAFA,EAEA;UAAA;IAF2BL,KAAK,EAAC,YAEjC;IAF+CS,OAAK,yCAAED,mDAAF;EAEpD,CAFA,EAAkE,MAAlE,oBAEAH,oBAAuB,MAAvB,EAAuBK,UAAvB,EAAa,KAAb,EACF,mBADyB,QACzB,CAJD,CAYI,kBAPJT,oBAME,OANF,EAME;IALAU,IAAI,EAAC,MAKL;IAJAX,KAAK,EAAC,cAIN;IAHAD,EAAE,EAAC,OAGH;IAFAa,YAAY,EAAC,OAEb;+DADSC,WAAKC,QAAKC;EACnB,CANF;;EAAA,kBAKWF,WAAKC,QAEZ,CAbN,CAyCI,EA3BJb,oBAiBM,KAjBN,cAiBM,CAhBJA,oBAQC,OARD,cAQC,EANUO,0CADRH,oBAMA,MANA,EAMA;UAAA;IAJCL,KAAK,EAAC,YAIP;IAHES,OAAK,yCAAED,yDAAF;EAGP,CANA,EAIA,MAJA,oBAMAH,oBAAuB,MAAvB,EAAuBW,UAAvB,EAAa,KAAb,EACF,mBADyB,eACzB,CARD,CAgBI,kBAPJf,oBAME,OANF,EAME;IALAU,IAAI,EAAC,UAKL;IAJAX,KAAK,EAAC,cAIN;IAHAD,EAAE,EAAC,UAGH;IAFAa,YAAY,EAAC,kBAEb;+DADSC,WAAKI,WAAQF;EACtB,CANF;;EAAA,kBAKWF,WAAKI,WAEZ,CAjBN,CA2BI,EATJhB,oBAQM,KARN,eAQM,CAPJA,oBAMS,QANT,EAMS;IALPU,IAAI,EAAC,QAKE;IAJPX,KAAK,EAAC,0BAIC;IAHNkB,QAAQ,GAAGV;EAGL,CANT,EAIC,gBAJD,EAMA;EAAA;EANA,EAMAW,WANA,CAOI,CARN,CASI,CA1CN,EADF;;EAAA,CAwDI,EAXJlB,oBAKM,KALN,eAKM,CAJJA,oBAGI,GAHJ,eAGI,kBAH8B,2BAG9B,EAFqBmB,WAErB,EADFC,aAAmEC,sBAAnE,EAAmE;IAAtDC,EAAE,EAAC,SAAmD;IAAzCvB,KAAK,EAAC;EAAmC,CAAnE;sBAAuC,MAAc,kBAAd,iBAAc;;;;GAArD,CACE,CAHJ,CAII,CALN,CAWI,EALJqB,aAIEG,qBAJF,EAIE;IAHC,gBAAcX,iBAGf;IAFC,gBAAcL,oBAEf;IADC,iBAAeK;EAChB,CAJF;;EAAA,oDAKI,CAjEN","names":["_imports_0","id","class","_createElementVNode","src","alt","for","_createElementBlock","_hoisted_2","onSubmit","$options","onClick","_hoisted_6","type","autocomplete","$data","email","$event","_hoisted_9","password","disabled","_hoisted_11","_hoisted_14","_createVNode","_component_router_link","to","_component_BlockAlert"],"sourceRoot":"","sources":["/Users/clementstorne/Google Drive/OpenClassrooms/Dev-web/P7/groupomania-code/front/src/components/FormLogin.vue"],"sourcesContent":["<template>\n  <div\n    id=\"form\"\n    class=\"container py-2 px-0 col-10 py-md-3 px-md-5 col-md-8 form\"\n  >\n    <img\n      src=\"@/assets/logo.svg\"\n      alt=\"Logo Groupomania\"\n      class=\"mt-2 mb-5 mt-md-3 mb-md-5\"\n    />\n    <form @submit.prevent=\"login\" class=\"col-10\">\n      <div class=\"row\">\n        <div class=\"mb-3 col-12\">\n          <label for=\"email\" class=\"form-label\"\n            ><span v-if=\"!emailIsEmpty\" class=\"form-alert\" @click=\"emailAlert\">\n              ⚠️ </span\n            ><span v-else> ✅ </span>Email</label\n          >\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            id=\"email\"\n            autocomplete=\"email\"\n            v-model=\"user.email\"\n          />\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"password\" class=\"form-label\"\n            ><span\n              v-if=\"!passwordIsEmpty\"\n              class=\"form-alert\"\n              @click=\"passwordAlert\"\n            >\n              ⚠️ </span\n            ><span v-else> ✅ </span>Mot de passe</label\n          >\n          <input\n            type=\"password\"\n            class=\"form-control\"\n            id=\"password\"\n            autocomplete=\"current-password\"\n            v-model=\"user.password\"\n          />\n        </div>\n        <div class=\"my-3 d-grid\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-primary mt-3 p-1\"\n            :disabled=\"!formIsValid\"\n          >\n            Se connecter\n          </button>\n        </div>\n      </div>\n    </form>\n    <div class=\"row mt-3\">\n      <p class=\"text-light text-center\">\n        Pas encore de compte ? <br />\n        <router-link to=\"/signup\" class=\"link\">Inscrivez-vous</router-link>\n      </p>\n    </div>\n    <BlockAlert\n      :reveal-alert=\"revealAlert\"\n      :toggle-alert=\"toggleAlert\"\n      :message-alert=\"messageAlert\"\n    />\n  </div>\n</template>\n\n<script>\nimport BlockAlert from \"@/components/BlockAlert.vue\";\n\nimport { AuthService } from \"@/services\";\n\nexport default {\n  name: \"login-form\",\n  components: {\n    BlockAlert,\n  },\n  data() {\n    return {\n      user: {\n        email: null,\n        password: null,\n      },\n      revealAlert: false,\n      messageAlert: \"\",\n    };\n  },\n  computed: {\n    emailIsEmpty() {\n      return this.user.email;\n    },\n    passwordIsEmpty() {\n      return this.user.password;\n    },\n    formIsValid() {\n      return this.emailIsEmpty && this.passwordIsEmpty;\n    },\n  },\n  methods: {\n    async login() {\n      try {\n        const credentials = {\n          email: this.user.email,\n          password: this.user.password,\n        };\n        let res = await AuthService.login(credentials);\n        await AuthService.saveToken(res.data.access_token);\n        console.log(localStorage.getItem(\"token\"));\n        this.$router.push(\"/home\");\n      } catch (err) {\n        console.log(err);\n        this.messageAlert = err.response.data.error.errorMessage;\n        this.revealAlert = !this.revealAlert;\n      }\n    },\n    toggleAlert() {\n      this.revealAlert = !this.revealAlert;\n    },\n    emailAlert() {\n      this.messageAlert = \"Veuillez saisir votre adresse mail\";\n      this.revealAlert = !this.revealAlert;\n    },\n    passwordAlert() {\n      this.messageAlert = \"Veuillez saisir votre mot de passe\";\n      this.revealAlert = !this.revealAlert;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n#form {\n  background-color: rgba($color-primary, 0.55);\n  border-radius: 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  & img {\n    height: 40px;\n    width: auto;\n  }\n}\n.form {\n  &-label {\n    color: $white;\n    font-size: 16px;\n    font-weight: 400;\n    text-align: left;\n  }\n  &-control {\n    border: none;\n    padding: 12px;\n    &:focus {\n      box-shadow: 0px 0px 0px 4px rgba($color-primary, 0.5);\n      outline: none;\n    }\n  }\n  &-alert {\n    cursor: pointer;\n  }\n}\n.btn-primary {\n  background: $color-tertiary;\n  font-weight: 700;\n  font-size: 24px;\n  border-radius: 8px;\n  border: none;\n  &:hover {\n    background: darken($color-tertiary, 5%);\n  }\n  &:focus {\n    background: darken($color-tertiary, 5%);\n    box-shadow: 0px 0px 0px 4px rgba($white, 0.5);\n    outline: none;\n  }\n  &:disabled {\n    background: $dark-gray;\n    box-shadow: 0px 0px 0px 4px rgba($color-tertiary, 0.5);\n    outline: none;\n  }\n}\n.link {\n  color: $color-tertiary;\n  font-weight: 600;\n  font-size: 20px;\n  &:hover {\n    color: darken($color-tertiary, 5%);\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}