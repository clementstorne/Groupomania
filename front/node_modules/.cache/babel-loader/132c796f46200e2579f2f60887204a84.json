{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-30be7b9f\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"posting container my-4\"\n};\nconst _hoisted_2 = {\n  class: \"col-12\"\n};\nconst _hoisted_3 = {\n  class: \"posting-top d-flex flex-column align-items-center flex-md-row justify-content-start align-items-md-start py-3\"\n};\nconst _hoisted_4 = {\n  class: \"posting-top-profile-picture mb-2\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = {\n  class: \"posting-top-right ms-2 me-2\"\n};\nconst _hoisted_8 = [\"placeholder\"];\nconst _hoisted_9 = [\"src\"];\nconst _hoisted_10 = {\n  class: \"posting-bottom row d-flex flex-column align-items-between flex-md-row justify-content-start align-items-md-start py-2\"\n};\nconst _hoisted_11 = {\n  class: \"posting-bottom-picture col-12 col-md-6 d-grid mb-2 p-0\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-secondary mx-1\"\n}, [/*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"media\"\n}, \"ðŸ“· Partager une photo\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_13 = {\n  class: \"posting-bottom-btn col-12 col-md-6 d-grid mb-2 p-0\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [$data.user.imageUrl ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $data.user.imageUrl,\n    alt: \"Photo de profil de l'utilisateur\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_5)) : (_openBlock(), _createElementBlock(\"img\", {\n    key: 1,\n    src: $data.defautlImageUrl,\n    alt: \"Photo de profil de l'utilisateur\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_6))]), _createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"textarea\", {\n    class: \"posting-top-message\",\n    placeholder: `Quoi de neuf, ${$data.user.firstname} ?`,\n    style: {\n      \"height\": \"100px\"\n    },\n    id: \"post_content\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.post.content = $event)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_8), [[_vModelText, $data.post.content]]), $data.imageBase64url ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $data.imageBase64url,\n    alt: \"\",\n    class: \"mt-3\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_9)) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"input\", {\n    type: \"file\",\n    name: \"image\",\n    id: \"media\",\n    accept: \"image/png, image/jpg, image/jpeg\",\n    class: \"posting-bottom-picture-btn-input\",\n    onChange: _cache[1] || (_cache[1] = (...args) => $options.setBase64urlImage && $options.setBase64urlImage(...args))\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  ), _hoisted_12]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    class: \"btn btn-primary mx-1\",\n    onClick: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.createNewPost && $options.createNewPost(...args), [\"prevent\"]))\n  }, \" Publier \")])])])]);\n}","map":{"version":3,"mappings":";;;;;EACOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EAEPA,KAAK,EAAC;;;EAEDA,KAAK,EAAC;;;;;EAYNA,KAAK,EAAC;;;;;EAiBXA,KAAK,EAAC;;;EAEDA,KAAK,EAAC;;;iEASTC,oBAES,QAFT,EAES;EAFDD,KAAK,EAAC;AAEL,CAFT,EAAsC,cACpCC,oBAAgD,OAAhD,EAAgD;EAAzCC,GAAG,EAAC;AAAqC,CAAhD,EAAmB,uBAAnB,CADoC,CAAtC;;AAAA;;;EAIGF,KAAK,EAAC;;;uBAjDjBG,oBAwDM,KAxDN,cAwDM,CAvDJF,oBAsDM,KAtDN,cAsDM,CArDJA,oBA8BM,KA9BN,cA8BM,CA3BJA,oBAWM,KAXN,cAWM,CAPIG,WAAKC,0BAHbF,oBAIE,KAJF,EAIE;UAAA;IAHCG,GAAG,EAAEF,WAAKC,QAGX;IAFAE,GAAG,EAAC;EAEJ,CAJF;;EAAA,gCAKAJ,oBAIE,KAJF,EAIE;UAAA;IAHCG,GAAG,EAAEF,qBAGN;IAFAG,GAAG,EAAC;EAEJ,CAJF;;EAAA,cAKI,CAXN,CA2BI,EAfJN,oBAcM,KAdN,cAcM,iBAbJA,oBAMY,UANZ,EAMY;IALVD,KAAK,EAAC,qBAKI;IAJTQ,WAAW,mBAAmBJ,WAAKK,SAAS,IAInC;IAHVC,KAAqB,EAArB;MAAA;IAAA,CAGU;IAFVC,EAAE,EAAC,cAEO;+DADDP,WAAKQ,UAAOC;EACX,CANZ;;EAAA,8BAKWT,WAAKQ,UAQZ,EAHIR,sCAHRD,oBAKE,KALF,EAKE;UAAA;IAJCG,GAAG,EAAEF,oBAIN;IAHAG,GAAG,EAAC,EAGJ;IADAP,KAAK,EAAC;EACN,CALF;;EAAA,kDAMI,CAdN,CAeI,CA9BN,CAqDI,EAtBJC,oBAqBM,KArBN,eAqBM,CAlBJA,oBAYM,KAZN,eAYM,CAXJA,oBAOE,OAPF,EAOE;IANAa,IAAI,EAAC,MAML;IALAC,IAAI,EAAC,OAKL;IAJAJ,EAAE,EAAC,OAIH;IAHAK,MAAM,EAAC,kCAGP;IAFAhB,KAAK,EAAC,kCAEN;IADCiB,QAAM,yCAAEC,iEAAF;EACP,CAPF;;EAAA,CAWI,EAHJC,WAGI,CAZN,CAkBI,EALJlB,oBAIM,KAJN,eAIM,CAHJA,oBAES,QAFT,EAES;IAFDD,KAAK,EAAC,sBAEL;IAF6BoB,OAAK,wDAAUF,yDAAV,EAAuB,WAAvB;EAElC,CAFT,EAAoE,WAApE,CAGI,CAJN,CAKI,CArBN,CAsBI,CAtDN,CAuDI,CAxDN","names":["class","_createElementVNode","for","_createElementBlock","$data","imageUrl","src","alt","placeholder","firstname","style","id","content","$event","type","name","accept","onChange","$options","_hoisted_12","onClick"],"sourceRoot":"","sources":["/Users/clementstorne/Google Drive/OpenClassrooms/Dev-web/P7/groupomania-code/front/src/components/PostShare.vue"],"sourcesContent":["<template>\n  <div class=\"posting container my-4\">\n    <div class=\"col-12\">\n      <div\n        class=\"posting-top d-flex flex-column align-items-center flex-md-row justify-content-start align-items-md-start py-3\"\n      >\n        <div class=\"posting-top-profile-picture mb-2\">\n          <img\n            :src=\"user.imageUrl\"\n            alt=\"Photo de profil de l'utilisateur\"\n            v-if=\"user.imageUrl\"\n          />\n          <img\n            :src=\"defautlImageUrl\"\n            alt=\"Photo de profil de l'utilisateur\"\n            v-else\n          />\n        </div>\n        <div class=\"posting-top-right ms-2 me-2\">\n          <textarea\n            class=\"posting-top-message\"\n            :placeholder=\"`Quoi de neuf, ${user.firstname} ?`\"\n            style=\"height: 100px\"\n            id=\"post_content\"\n            v-model=\"post.content\"\n          ></textarea>\n          <img\n            :src=\"imageBase64url\"\n            alt=\"\"\n            v-if=\"imageBase64url\"\n            class=\"mt-3\"\n          />\n        </div>\n      </div>\n      <div\n        class=\"posting-bottom row d-flex flex-column align-items-between flex-md-row justify-content-start align-items-md-start py-2\"\n      >\n        <div class=\"posting-bottom-picture col-12 col-md-6 d-grid mb-2 p-0\">\n          <input\n            type=\"file\"\n            name=\"image\"\n            id=\"media\"\n            accept=\"image/png, image/jpg, image/jpeg\"\n            class=\"posting-bottom-picture-btn-input\"\n            @change=\"setBase64urlImage\"\n          />\n          <button class=\"btn btn-secondary mx-1\">\n            <label for=\"media\">ðŸ“· Partager une photo</label>\n          </button>\n        </div>\n        <div class=\"posting-bottom-btn col-12 col-md-6 d-grid mb-2 p-0\">\n          <button class=\"btn btn-primary mx-1\" @click.prevent=\"createNewPost\">\n            Publier\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { UsersService } from \"@/services/UsersService\";\nimport { PostsService } from \"@/services/PostsService\";\nimport profilePicture from \"@/assets/user-profile-picture.png\";\n\nexport default {\n  name: \"PostShare\",\n  data() {\n    return {\n      user: {\n        id: 0,\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        imageUrl: \"\",\n      },\n      post: {\n        content: \"\",\n      },\n      defautlImageUrl: profilePicture,\n      imageBase64url: \"\",\n      imageFile: null,\n    };\n  },\n  methods: {\n    setBase64urlImage(e) {\n      this.imageFile = e.target.files[0];\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(this.imageFile);\n      fileReader.addEventListener(\"load\", () => {\n        this.imageBase64url = fileReader.result;\n      });\n    },\n    async createNewPost() {\n      try {\n        const formData = new FormData();\n        if (this.imageFile) {\n          formData.append(\"image\", this.imageFile);\n        }\n        formData.append(\"content\", this.post.content);\n        const result = await PostsService.createPost(formData);\n        this.$emit(\"newPostPublished\", result.data.data);\n        this.post.content = null;\n        this.imageFile = null;\n        this.imageBase64url = null;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n  },\n  created() {\n    UsersService.getUserData()\n      .then((res) => {\n        this.user = res.data.data;\n      })\n      .catch((err) => console.log(err));\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.posting {\n  background: $white;\n  border-radius: 9px;\n  &-top {\n    &-profile-picture {\n      & img {\n        width: 40px;\n        height: 40px;\n        object-fit: cover;\n        border-radius: 50%;\n      }\n    }\n    &-right {\n      margin-left: 12px;\n      width: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      & img {\n        max-width: 100%;\n      }\n    }\n    &-message {\n      border-radius: 16px;\n      padding: 8px 16px;\n      background: $gray;\n      border: none;\n      resize: none;\n      width: 100%;\n      &:focus {\n        box-shadow: 0px 0px 0px 4px rgba($color-primary, 0.5);\n        outline: none;\n      }\n    }\n  }\n  &-bottom {\n    color: $dark-gray;\n    font-weight: 600;\n    align-items: center;\n    margin: 0;\n    &-picture {\n      position: relative;\n      overflow: hidden;\n      &:hover {\n        color: $color-primary;\n        font-weight: 900;\n        cursor: pointer;\n      }\n      &-btn-input {\n        position: absolute;\n        font-size: 50px;\n        opacity: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n        left: 0;\n      }\n      & p {\n        margin-bottom: 0;\n      }\n    }\n  }\n}\n.btn {\n  font-weight: 700;\n  font-size: 16px;\n  border-radius: 8px;\n  border: none;\n  &-primary {\n    background: $color-primary !important;\n    &:hover {\n      background: darken($color-primary, 5%);\n    }\n    &:focus {\n      box-shadow: 0px 0px 0px 4px rgba($color-primary, 0.5);\n      outline: none;\n    }\n  }\n  &-secondary {\n    background: $color-tertiary !important;\n    &:hover {\n      background: darken($color-tertiary, 5%);\n    }\n    &:focus {\n      box-shadow: 0px 0px 0px 4px rgba($color-tertiary, 0.5);\n      outline: none;\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}